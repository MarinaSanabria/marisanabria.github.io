---
const today = new Date();
import contactIconRaw from "../../assets/icons/contact-icon.svg?raw";
import Button from "../ui/button/Button.astro";

function sanitizeToWhite(svg: string, size = 18) {
  let s = svg
    .replace(/<\?xml[\s\S]*?\?>/g, "")
    .replace(/<!--([\s\S]*?)-->/g, "")
    .replace(/width=\"[^\"]*\"/g, "")
    .replace(/height=\"[^\"]*\"/g, "")
    .replace(/fill=\"[^\"]*\"/gi, 'fill="currentColor"')
    .replace(/stroke=\"[^\"]*\"/gi, 'stroke="none"');
  s = s.replace(/<svg([^>]*)>/, (m, attrs) => `<svg${attrs} width="${size}" height="${size}">`);
  return s;
}

const contactIcon = sanitizeToWhite(contactIconRaw);
const feedUrl = new URL('rss.xml', Astro.site).toString();
const feedlyUrl = `https://feedly.com/i/subscription/feed/${feedUrl}`;
const inoreaderUrl = `https://www.inoreader.com/?add_feed=${feedUrl}`;
---

<footer id="contact" class="py-12 px-4">
  <h2 class="text-2xl md:text-3xl font-semibold text-foreground text-center">Contacto</h2>
  <div class="mt-6 flex justify-center">
    <div class="w-full max-w-3xl grid grid-cols-1 md:grid-cols-3 gap-6 items-center text-center">

      <!-- Email -->
      <div class="flex flex-col items-center gap-2">
        <span class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-[color:var(--accent)] text-white flex-shrink-0">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
            <polyline points="22,6 12,13 2,6"/>
          </svg>
        </span>
        <div>
          <div class="font-semibold text-foreground">Email</div>
          <a href="mailto:marina.s.sanabria@gmail.com" class="text-[color:var(--color-text-muted)] hover:text-[color:var(--accent)] transition-colors">
            marina.s.sanabria@gmail.com
          </a>
        </div>
      </div>

      <!-- Ubicación -->
      <div class="flex flex-col items-center gap-2">
        <span class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-[color:var(--accent)] text-white flex-shrink-0">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
            <circle cx="12" cy="10" r="3"/>
          </svg>
        </span>
        <div>
          <div class="font-semibold text-foreground">Ubicación</div>
          <div class="text-[color:var(--color-text-muted)]">Córdoba, Argentina</div>
        </div>
      </div>

      <!-- Redes -->
      <div class="flex flex-col items-center gap-2">
        <span class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-[color:var(--accent)] text-white flex-shrink-0">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
            <path d="M12 2C6.477 2 2 6.477 2 12c0 4.418 2.865 8.166 6.839 9.489.5.092.682-.217.682-.483 0-.237-.009-.866-.014-1.699-2.782.604-3.369-1.34-3.369-1.34-.455-1.158-1.11-1.467-1.11-1.467-.908-.62.069-.607.069-.607 1.004.071 1.532 1.032 1.532 1.032.892 1.529 2.341 1.087 2.91.832.091-.647.35-1.087.637-1.337-2.22-.253-4.555-1.11-4.555-4.944 0-1.091.39-1.984 1.03-2.683-.103-.253-.447-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.56 9.56 0 0 1 12 6.844c.85.004 1.705.115 2.504.337 1.91-1.296 2.748-1.026 2.748-1.026.546 1.378.202 2.397.1 2.65.64.699 1.03 1.592 1.03 2.683 0 3.842-2.338 4.687-4.565 4.935.36.31.68.923.68 1.861 0 1.343-.012 2.427-.012 2.756 0 .268.18.58.688.482C19.137 20.165 22 16.418 22 12c0-5.523-4.477-10-10-10z"/>
          </svg>
        </span>
        <div>
          <div class="font-semibold text-foreground">Redes</div>
          <div class="flex items-center gap-3 mt-1 justify-center">
            <a href="https://www.linkedin.com/in/marina-sanabria/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn" class="text-[color:var(--color-text-muted)] hover:text-[color:var(--accent)] transition-colors">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                <path d="M4.98 3.5C4.98 4.88 3.88 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1 4.98 2.12 4.98 3.5zM.5 8h4v14h-4zM9 8h3.6v2h.05c.5-.95 1.72-1.95 3.55-1.95C20.9 8.05 22 10.22 22 13.8V22h-4v-7.2c0-1.71-.03-3.9-2.38-3.9-2.38 0-2.74 1.86-2.74 3.77V22H9z"/>
              </svg>
            </a>
            <a href="https://github.com/MarinaSanabria" target="_blank" rel="noopener noreferrer" aria-label="GitHub" class="text-[color:var(--color-text-muted)] hover:text-[color:var(--accent)] transition-colors">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                <path d="M12 .5C5.73.5.5 5.73.5 12c0 5.08 3.29 9.38 7.86 10.9.58.1.79-.25.79-.56 0-.28-.01-1.02-.02-2-3.2.7-3.88-1.54-3.88-1.54-.53-1.35-1.3-1.71-1.3-1.71-1.06-.73.08-.72.08-.72 1.17.08 1.79 1.2 1.79 1.2 1.04 1.78 2.72 1.27 3.38.97.11-.75.41-1.27.74-1.56-2.55-.29-5.24-1.28-5.24-5.69 0-1.26.45-2.29 1.2-3.1-.12-.29-.52-1.46.11-3.04 0 0 .98-.31 3.2 1.19a11.1 11.1 0 0 1 2.91-.39c.99 0 1.98.13 2.91.39 2.22-1.5 3.2-1.19 3.2-1.19.63 1.58.23 2.75.11 3.04.75.81 1.2 1.84 1.2 3.1 0 4.41-2.7 5.39-5.27 5.67.42.36.8 1.08.8 2.18 0 1.57-.01 2.83-.01 3.22 0 .31.21.67.8.56C20.71 21.38 24 17.08 24 12 24 5.73 18.27.5 12 .5z"/>
              </svg>
            </a>
          </div>
        </div>
      </div>

    </div>
  </div>
  
  <script type="module">
    document.addEventListener('click', (e) => {
      const target = e.target;
      if (!(target instanceof HTMLElement)) return;
      if (target.matches('button[data-copy]')) {
        const url = target.getAttribute('data-copy');
        if (!url) return;
        navigator.clipboard?.writeText(url);
        const original = target.textContent || 'Copy RSS link';
        target.textContent = 'Copied!';
        setTimeout(() => { target.textContent = original; }, 1500);
      }
    });
  </script>
</footer>